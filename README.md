# Курсовая работа №5. Работа с базами данных 

## Описание
Проект представляет собой программу, которая может получать информацию о вакансиях с платформы **HeadHunter**
(реализовано взаимодействие с API HeadHunter через библиотеку **requests**),
сохранять ее в базу данных **Postgress** (постредством библиотеки **psycopg2**)
и позволяет потом делать из неё некоторые выборки (в соответствии с заданием на Курсовую работу).

Запрашиваются вакансии по 10 выбранным заранее работодателям:
```
АЙТИ.СПЕЙС
KPBS
evrone.ru
Электронная торговая площадка Газпромбанка
FutureToday
Непрерывные Технологии
Домклик
Ай-Теко (I-Teco)
Генотек
ООО Фабрика Решений
```

При загрузке информации, если такая вакансия уже есть в БД, она обновляется.

## Интерфейс
В программе реализован интерфейс командной строки. Вид главного меню:
```
Выберите действие (1):
    0. Создать таблицы.
    1. Загрузить вакансии с сайта в БД.
    2. Получить список всех компаний и количество вакансий у каждой компании.
    3. Получить список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию.
    4. Получить среднюю зарплату по вакансиям.
    5. Получить список всех вакансий, у которых зарплата выше средней по всем вакансиям.
    6. Получить список всех вакансий, в названии которых содержится ключевое слово. 
    7. Завершить работу программы.
    = >
```
- С помощью пункта **0** можно создать таблицы БД, если они ещё не созданы.  
- С помощью пункта **1** можно загрузить с сайта HeadHunter вакансии.  
- С помощью пункта **2** можно получить список всех загруженных компаний и количество вакансий у каждой компании.  
- С помощью пункта **3** можно получить список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию.
- С помощью пункта **4** можно получить среднюю зарплату по всем вакансиям.
- С помощью пункта **5** можно получить список всех вакансий, у которых зарплата выше средней по всем вакансиям.
- С помощью пункта **6** можно получить список всех вакансий, в названии которых содержится ключевое слово, например “python”.
- При выборе пункта **7** происходит выход из программы.

Таблицы выводятся с помощью библиотеки **pandas**:
```
                             Название компании                                  Название вакансии  Зарлата от  Зарплата до                             URL
0                                   АЙТИ.СПЕЙС  Инженер по подбору компрессорного насосного об...     80000.0     120000.0  https://hh.ru/vacancy/79203540
1                                   АЙТИ.СПЕЙС                              Коммерческий директор         NaN     150000.0  https://hh.ru/vacancy/79211890
2                                   АЙТИ.СПЕЙС                                 Системный aналитик    200000.0     250000.0  https://hh.ru/vacancy/79278756
3                                   АЙТИ.СПЕЙС                              Android - разработчик         NaN     280000.0  https://hh.ru/vacancy/79155246
4                                   АЙТИ.СПЕЙС                        Старший финансовый аналитик         NaN     151000.0  https://hh.ru/vacancy/79447007
```

## Путеводитель по коду
Кода разбит на модули: **api**, **DB**, **vacancy**.

В модуле [api](api) находятся классы для работы с API сайта HeadHunter:

- в файле [api.py](api/api.py) - абстрактный класс
[Engine](https://github.com/fedor-metsger/course_work05/blob/2c0f75072629f1d77c2fd453fa5e2448dfb14280/api/api.py#L6),
обозначающий необходимые методы для работы с API.  
- в файле [hh.py](api/hh.py) - класс
[HH](https://github.com/fedor-metsger/course_work05/blob/2c0f75072629f1d77c2fd453fa5e2448dfb14280/api/hh.py#L9),
реализующий работу с API сайта HeadHunter.

В модуле [DB](DB) в файле [db_manager.py](DB/db_manager.py) находится класс
[DBManager](https://github.com/fedor-metsger/course_work05/blob/2c0f75072629f1d77c2fd453fa5e2448dfb14280/DB/db_manager.py#L4),
служащий для работы с базой данных для сохранения и выборки загруженных с сайтов вакансий.

В модуле [vacancy](vacancy) находятся классы для работы с загруженнымы в память вакансиями:

- в файле [vacancy.py](vacancy/vacancy.py) - класс
[Vacancy](https://github.com/fedor-metsger/course_work05/blob/2c0f75072629f1d77c2fd453fa5e2448dfb14280/vacancy/vacancy.py#L3
), объединяющий общие методы работы с вакансиями.
- в файле [hh.py](vacancy/hh.py) - класс
[HHVacancy](https://github.com/fedor-metsger/course_work05/blob/2c0f75072629f1d77c2fd453fa5e2448dfb14280/vacancy/hh.py#L4),
реализующий работу с васансией HeadHunter.

Так же в файле [vacancy.py](vacancy/vacancy.py) реализован класс
[VacancyCollection](https://github.com/fedor-metsger/course_work05/blob/2c0f75072629f1d77c2fd453fa5e2448dfb14280/vacancy/vacancy.py#L166),
который реализует набор вакансий.

В модуле [utils](utils.py) реализованы вспомогательные функции.

В модуле [main](main.py), в функции
[main()](https://github.com/fedor-metsger/course_work05/blob/2c0f75072629f1d77c2fd453fa5e2448dfb14280/main.py#L26)
реализовано главное меню программы.

В коде применяются декораторы **@staticmethod**, **@property**, **@abstractmethod**.

В коде используется наследование, полиморфизм классов и инкапсуляция данных.

В проекте используется виртуальное окружение на основе **venv**.
